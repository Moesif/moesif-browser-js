(function() {
var p=void 0,r=null,s=!1;
(function(){var B,H,I,z;function N(a){var c=XMLHttpRequest.prototype,d=c.open,i=c.send,e=c.setRequestHeader;c.open=function(a,b){this.K=a;this.m=b;this.z={};this.L=(new Date).toISOString();return d.apply(this,arguments)};c.setRequestHeader=function(a,d){this.z[a]=d;return e.apply(this,arguments)};c.send=function(d){this.addEventListener("load",function(){var c=(new Date).toISOString();if(a){var e=this.m?this.m.toLowerCase():this.m;if(e&&0>e.indexOf("moesif.com")&&0>e.indexOf("apirequest.io")){a:if((e=this.m)&&
"string"===typeof e){var i=b.trim(e);if(0!==i.indexOf("http")){e=O+window.location.host+"/"+i.replace(/^\./,"").replace(/^\//,"");break a}}e={uri:e,verb:this.K,time:this.L,headers:this.z};if(d)if("string"===typeof d){m.log("request post data is string");m.log(d);try{e.body=b.g(d)}catch(l){m.log("JSON decode failed"),m.log(l),e.transfer_encoding="base64",e.body=b.B(d)}}else if("object"===typeof d||"array"===typeof d||"number"===typeof d||"boolean"===typeof d)e.body=d;var k=this.getAllResponseHeaders(),
i={};if(k)for(var k=k.split("\r\n"),n=0;n<k.length;n++){var C=k[n],D=C.indexOf(": ");0<D&&(i[C.substring(0,D)]=C.substring(D+2))}c={status:this.status,time:c,headers:i};if(this.responseText)try{c.body=b.g(this.responseText)}catch(o){c.transfer_encoding="base64",c.body=b.B(this.responseText)}a({request:e,response:c})}}});return i.apply(this,arguments)};return function(){c.open=d;c.send=i;c.setRequestHeader=e}}z="1.1.1";var u;u="undefined"===typeof window?{navigator:{}}:window;var E=Array.prototype,
J=Object.prototype,v=E.slice,x=J.toString,A=J.hasOwnProperty,y=u.console,w=u.navigator,q=u.document,o=w.userAgent,F=Function.prototype.bind,K=E.forEach,L=E.indexOf;u=Array.isArray;var G={},b={trim:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},m={log:function(){},error:function(){},M:function(){if(!b.u(y)&&y){var a=["Moesif error:"].concat(b.p(arguments));try{y.error.apply(y,a)}catch(c){b.d(a,function(a){y.error(a)})}}}};b.bind=function(a,c){var d,i;if(F&&a.bind===F)return F.apply(a,
v.call(arguments,1));if(!b.e(a))throw new TypeError;d=v.call(arguments,2);return i=function(){if(!(this instanceof i))return a.apply(c,d.concat(v.call(arguments)));var b={};b.prototype=a.prototype;var h=new b;b.prototype=r;b=a.apply(h,d.concat(v.call(arguments)));return Object(b)===b?b:h}};b.fa=function(a){for(var c in a)"function"===typeof a[c]&&(a[c]=b.bind(a[c],a))};b.d=function(a,b){if(!(a===r||a===p))if(K&&a.forEach===K)a.forEach(b,p);else if(a.length===+a.length)for(var d=0,i=a.length;d<i&&
!(d in a&&b.call(p,a[d],d,a)===G);d++);else for(d in a)if(A.call(a,d)&&b.call(p,a[d],d,a)===G)break};b.ia=function(a){a&&b.s(a)&&(a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"));return a};b.extend=function(a){b.d(v.call(arguments,1),function(b){for(var d in b)b[d]!==p&&(a[d]=b[d])});return a};b.isArray=u||function(a){return"[object Array]"===x.call(a)};b.e=function(a){try{return/^\s*\bfunction\b/.test(a)}catch(b){return s}};b.Q=function(a){return!(!a||
!A.call(a,"callee"))};b.p=function(a){return!a?[]:a.p?a.p():b.isArray(a)||b.Q(a)?v.call(a):b.$(a)};b.$=function(a){var c=[];if(a===r)return c;b.d(a,function(a){c[c.length]=a});return c};b.ka=function(a){return a};b.la=function(a,c){var d=s;if(a===r)return d;if(L&&a.indexOf===L)return-1!=a.indexOf(c);b.d(a,function(a){if(d||(d=a===c))return G});return d};b.a=function(a,b){return-1!==a.indexOf(b)};b.ma=function(a,b){a.prototype=new b;a.ua=b.prototype;return a};b.j=function(a){return a===Object(a)&&
!b.isArray(a)};b.U=function(a){if(b.j(a)){for(var c in a)if(A.call(a,c))return s;return!0}return s};b.u=function(a){return a===p};b.s=function(a){return"[object String]"==x.call(a)};b.S=function(a){return"[object Date]"==x.call(a)};b.na=function(a){return"[object Number]"==x.call(a)};b.T=function(a){return!!(a&&1===a.nodeType)};b.N=function(a){b.d(a,function(c,d){b.S(c)?a[d]=b.O(c):b.j(c)&&(a[d]=b.N(c))});return a};b.timestamp=function(){Date.now=Date.now||function(){return+new Date};return Date.now()};
b.O=function(a){function b(a){return 10>a?"0"+a:a}return a.getUTCFullYear()+"-"+b(a.getUTCMonth()+1)+"-"+b(a.getUTCDate())+"T"+b(a.getUTCHours())+":"+b(a.getUTCMinutes())+":"+b(a.getUTCSeconds())};b.J=function(a){return function(){try{return a.apply(this,arguments)}catch(b){m.M("Implementation error. Please contact support@moesif.com.")}}};b.qa=function(a,c){for(var d=0;d<c.length;d++)a.prototype[c[d]]=b.J(a.prototype[c[d]])};b.ra=function(a){for(var c in a)"function"===typeof a[c]&&(a[c]=b.J(a[c]))};
b.w=function(a){var c={};b.d(a,function(a,i){b.s(a)&&0<a.length&&(c[i]=a)});return c};b.truncate=function(a,c){var d;"string"===typeof a?d=a.slice(0,c):b.isArray(a)?(d=[],b.d(a,function(a){d.push(b.truncate(a,c))})):b.j(a)?(d={},b.d(a,function(a,e){d[e]=b.truncate(a,c)})):d=a;return d};b.k=function(){return function(a){function b(a,e){var h="",f=0,g=f="",g=0,j=h,l=[],k=e[a];k&&"object"===typeof k&&"function"===typeof k.toJSON&&(k=k.toJSON(a));switch(typeof k){case "string":return d(k);case "number":return isFinite(k)?
""+k:"null";case "boolean":case "null":return""+k;case "object":if(!k)return"null";h+="    ";l=[];if("[object Array]"===x.apply(k)){g=k.length;for(f=0;f<g;f+=1)l[f]=b(f,k)||"null";return g=0===l.length?"[]":h?"[\n"+h+l.join(",\n"+h)+"\n"+j+"]":"["+l.join(",")+"]"}for(f in k)A.call(k,f)&&(g=b(f,k))&&l.push(d(f)+(h?": ":":")+g);return g=0===l.length?"{}":h?"{"+l.join(",")+""+j+"}":"{"+l.join(",")+"}"}}function d(a){var b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(a){var b=d[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}return b("",{"":a})}}();b.g=function(){function a(){switch(g){case "t":return e("t"),e("r"),e("u"),e("e"),!0;case "f":return e("f"),e("a"),e("l"),e("s"),e("e"),s;case "n":return e("n"),e("u"),e("l"),e("l"),r}h('Unexpected "'+g+'"')}function b(){for(;g&&
" ">=g;)e()}function d(){var a,b,d="",c;if('"'===g)for(;e();){if('"'===g)return e(),d;if("\\"===g)if(e(),"u"===g){for(b=c=0;4>b;b+=1){a=parseInt(e(),16);if(!isFinite(a))break;c=16*c+a}d+=String.fromCharCode(c)}else if("string"===typeof j[g])d+=j[g];else break;else d+=g}h("Bad string")}function i(){var a;a="";"-"===g&&(a="-",e("-"));for(;"0"<=g&&"9">=g;)a+=g,e();if("."===g)for(a+=".";e()&&"0"<=g&&"9">=g;)a+=g;if("e"===g||"E"===g){a+=g;e();if("-"===g||"+"===g)a+=g,e();for(;"0"<=g&&"9">=g;)a+=g,e()}a=
+a;if(isFinite(a))return a;h("Bad number")}function e(a){a&&a!==g&&h("Expected '"+a+"' instead of '"+g+"'");g=l.charAt(f);f+=1;return g}function h(a){throw{name:"SyntaxError",message:a,ea:f,text:l};}var f,g,j={'"':'"',"\\":"\\","/":"/",b:"\u0008",f:"\u000c",n:"\n",r:"\r",t:"\t"},l,k;k=function(){b();switch(g){case "{":var f;a:{var j,l={};if("{"===g){e("{");b();if("}"===g){e("}");f=l;break a}for(;g;){j=d();b();e(":");Object.hasOwnProperty.call(l,j)&&h('Duplicate key "'+j+'"');l[j]=k();b();if("}"===
g){e("}");f=l;break a}e(",");b()}}h("Bad object")}return f;case "[":a:{f=[];if("["===g){e("[");b();if("]"===g){e("]");j=f;break a}for(;g;){f.push(k());b();if("]"===g){e("]");j=f;break a}e(",");b()}}h("Bad array")}return j;case '"':return d();case "-":return i();default:return"0"<=g&&"9">=g?i():a()}};return function(a){l=a;f=0;g=" ";a=k();b();g&&h("Syntax error");return a}}();b.B=function(a){var c,d,i,e,h=0,f=0,g="",g=[];if(!a)return a;a=b.Z(a);do c=a.charCodeAt(h++),d=a.charCodeAt(h++),i=a.charCodeAt(h++),
e=c<<16|d<<8|i,c=e>>18&63,d=e>>12&63,i=e>>6&63,e&=63,g[f++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e);while(h<a.length);g=g.join("");switch(a.length%3){case 1:g=g.slice(0,-2)+"==";break;case 2:g=g.slice(0,-1)+"="}return g};b.Z=function(a){var a=
(a+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),b="",d,i,e=0,h;d=i=0;e=a.length;for(h=0;h<e;h++){var f=a.charCodeAt(h),g=r;128>f?i++:g=127<f&&2048>f?String.fromCharCode(f>>6|192,f&63|128):String.fromCharCode(f>>12|224,f>>6&63|128,f&63|128);g!==r&&(i>d&&(b+=a.substring(d,i)),b+=g,d=i=h+1)}i>d&&(b+=a.substring(d,a.length));return b};b.ba=function(){function a(){function a(b,d){var e,f=0;for(e=0;e<d.length;e++)f|=c[e]<<8*e;return b^f}var b,e,c=[],f=0;for(b=0;b<o.length;b++)e=o.charCodeAt(b),c.unshift(e&
255),4<=c.length&&(f=a(f,c),c=[]);0<c.length&&(f=a(f,c));return f.toString(16)}function b(){for(var a=1*new Date,c=0;a==1*new Date;)c++;return a.toString(16)+c.toString(16)}return function(){var d=(screen.height*screen.width).toString(16);return b()+"-"+Math.random().toString(16).replace(".","")+"-"+a()+"-"+d+"-"+b()}}();b.R=function(a){return/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(a)?!0:s};b.aa=function(a,c){var d,i,e=[];b.u(c)&&(c="&");b.d(a,function(a,
b){d=encodeURIComponent(a.toString());i=encodeURIComponent(b);e[e.length]=i+"="+d});return e.join(c)};b.H=function(a,b){var b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),d=RegExp("[\\?&]"+b+"=([^&#]*)").exec(a);return d===r||d&&"string"!==typeof d[1]&&d[1].length?"":decodeURIComponent(d[1]).replace(/\+/g," ")};b.ja=function(a,b){var d=a.match(RegExp(b+"=([^&]*)"));return d?d[1]:r};b.cookie={get:function(a){for(var a=a+"=",b=q.cookie.split(";"),d=0;d<b.length;d++){for(var i=b[d];" "==i.charAt(0);)i=
i.substring(1,i.length);if(0===i.indexOf(a))return decodeURIComponent(i.substring(a.length,i.length))}return r},parse:function(a){var c;try{c=b.g(b.cookie.get(a))||{}}catch(d){}return c},ta:function(a,b,d,i,e){var c;var h="",f="",g="";i&&(c=(h=(h=q.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i))?h[0]:"")?"; domain=."+h:"",h=c);d&&(f=new Date,f.setTime(f.getTime()+1E3*d),f="; expires="+f.toGMTString());e&&(g="; secure");q.cookie=a+"="+encodeURIComponent(b)+f+"; path=/"+h+g},set:function(a,
b,d,i,e){var c;var h="",f="",g="";i&&(c=(h=(h=q.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i))?h[0]:"")?"; domain=."+h:"",h=c);d&&(f=new Date,f.setTime(f.getTime()+864E5*d),f="; expires="+f.toGMTString());e&&(g="; secure");a=a+"="+encodeURIComponent(b)+f+"; path=/"+h+g;return q.cookie=a},remove:function(a,c){b.cookie.set(a,"",-1,c)}};b.localStorage={error:function(a){m.error("localStorage error: "+a)},get:function(a){try{return window.localStorage.getItem(a)}catch(c){b.localStorage.error(c)}return r},
parse:function(a){try{return b.g(b.localStorage.get(a))||{}}catch(c){}return r},set:function(a,c){try{window.localStorage.setItem(a,c)}catch(d){b.localStorage.error(d)}},remove:function(a){try{window.localStorage.removeItem(a)}catch(c){b.localStorage.error(c)}}};b.ha=function(){function a(a,b){return 0<=(" "+a.className+" ").replace(d," ").indexOf(" "+b+" ")}function c(d){if(!q.getElementsByTagName)return[];var d=d.split(" "),e,c,f,g,j,l,k,n=[q];for(g=0;g<d.length;g++)if(e=d[g].replace(/^\s+/,"").replace(/\s+$/,
""),-1<e.indexOf("#")){c=e.split("#");e=c[0];n=q.getElementById(c[1]);if(!n||e&&n.nodeName.toLowerCase()!=e)return[];n=[n]}else if(-1<e.indexOf(".")){c=e.split(".");e=c[0];var m=c[1];e||(e="*");c=[];for(j=f=0;j<n.length;j++){k="*"==e?n[j].all?n[j].all:n[j].getElementsByTagName("*"):n[j].getElementsByTagName(e);for(l=0;l<k.length;l++)c[f++]=k[l]}n=[];for(j=e=0;j<c.length;j++)c[j].className&&b.s(c[j].className)&&a(c[j],m)&&(n[e++]=c[j])}else if(c=e.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){e=
c[1];var o=c[2],m=c[3],t=c[4];e||(e="*");c=[];for(j=f=0;j<n.length;j++){k="*"==e?n[j].all?n[j].all:n[j].getElementsByTagName("*"):n[j].getElementsByTagName(e);for(l=0;l<k.length;l++)c[f++]=k[l]}n=[];e=0;switch(m){case "=":m=function(a){return a.getAttribute(o)==t};break;case "~":m=function(a){return a.getAttribute(o).match(RegExp("\\b"+t+"\\b"))};break;case "|":m=function(a){return a.getAttribute(o).match(RegExp("^"+t+"-?"))};break;case "^":m=function(a){return 0===a.getAttribute(o).indexOf(t)};break;
case "$":m=function(a){return a.getAttribute(o).lastIndexOf(t)==a.getAttribute(o).length-t.length};break;case "*":m=function(a){return-1<a.getAttribute(o).indexOf(t)};break;default:m=function(a){return a.getAttribute(o)}}n=[];for(j=e=0;j<c.length;j++)m(c[j])&&(n[e++]=c[j])}else{c=[];for(j=f=0;j<n.length;j++){k=n[j].getElementsByTagName(e);for(l=0;l<k.length;l++)c[f++]=k[l]}n=c}return n}var d=/[\t\r\n]/g;return function(a){return b.T(a)?[a]:b.j(a)&&!b.u(a.length)?a:c.call(this,a)}}();b.info={ga:function(){var a=
"",c={};b.d("utm_source utm_medium utm_campaign utm_content utm_term".split(" "),function(d){a=b.H(q.URL,d);a.length&&(c[d]=a)});return c},X:function(a){return 0===a.search("https?://(.*)google.([^/?]*)")?"google":0===a.search("https?://(.*)bing.com")?"bing":0===a.search("https?://(.*)yahoo.com")?"yahoo":0===a.search("https?://(.*)duckduckgo.com")?"duckduckgo":r},sa:function(a){var c=b.info.X(a),d={};if(c!==r)d.$search_engine=c,a=b.H(a,"yahoo"!=c?"q":"p"),a.length&&(d.mp_keyword=a);return d},i:function(a,
c,d){return d||b.a(a," OPR/")?b.a(a,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":b.a(a,"IEMobile")||b.a(a,"WPDesktop")?"Internet Explorer Mobile":b.a(a,"Edge")?"Microsoft Edge":b.a(a,"FBIOS")?"Facebook Mobile":b.a(a,"Chrome")?"Chrome":b.a(a,"CriOS")?"Chrome iOS":b.a(a,"UCWEB")||b.a(a,"UCBrowser")?"UC Browser":b.a(a,"FxiOS")?"Firefox iOS":b.a(c||"","Apple")?b.a(a,"Mobile")?"Mobile Safari":"Safari":b.a(a,"Android")?"Android Mobile":b.a(a,"Konqueror")?"Konqueror":b.a(a,
"Firefox")?"Firefox":b.a(a,"MSIE")||b.a(a,"Trident/")?"Internet Explorer":b.a(a,"Gecko")?"Mozilla":""},C:function(a,c,d){c={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,
Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[b.info.i(a,c,d)];if(c===p)return r;a=a.match(c);return!a?r:parseFloat(a[a.length-2])},v:function(){return/Windows/i.test(o)?/Phone/.test(o)||/WPDesktop/.test(o)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(o)?"iOS":/Android/.test(o)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(o)?"BlackBerry":/Mac/i.test(o)?
"Mac OS X":/Linux/.test(o)?"Linux":""},G:function(a){return/Windows Phone/i.test(a)||/WPDesktop/.test(a)?"Windows Phone":/iPad/.test(a)?"iPad":/iPod/.test(a)?"iPod Touch":/iPhone/.test(a)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":/Android/.test(a)?"Android":""},W:function(a){a=a.split("/");return 3<=a.length?a[2]:""},V:function(){return b.extend(b.w({$os:b.info.v(),$browser:b.info.i(o,w.vendor,window.opera),$referrer:q.referrer,$referring_domain:b.info.W(q.referrer),$device:b.info.G(o)}),
{$current_url:window.location.href,$browser_version:b.info.C(o,w.vendor,window.opera),$screen_height:screen.height,$screen_width:screen.width,mp_lib:"web",$lib_version:z})},pa:function(){return b.extend(b.w({$os:b.info.v(),$browser:b.info.i(o,w.vendor,window.opera)}),{$browser_version:b.info.C(o,w.vendor,window.opera)})},oa:function(a){return b.w({mp_page:a,mp_referrer:q.referrer,mp_browser:b.info.i(o,w.vendor,window.opera),mp_platform:b.info.v()})}};b.toArray=b.p;b.isObject=b.j;b.JSONEncode=b.k;
b.JSONDecode=b.g;b.isBlockedUA=b.R;b.isEmptyObject=b.U;b.info=b.info;b.info.device=b.info.G;b.info.browser=b.info.i;b.info.properties=b.info.V;var O="https:"===document.location.protocol?"https://":"http://";B="api.moesif.net";H="/v1/events";I="/v1/users";var M="https:"===document.location.protocol?"https://":"http://";window.moesif=function(){function a(a,c,e,h){m.log("actually sending to log event "+b.k(a));var f=new XMLHttpRequest;f.open("POST",M+B+H);f.setRequestHeader("Content-Type","application/json");
f.setRequestHeader("X-Moesif-Application-Id",c);f.setRequestHeader("X-Moesif-SDK","moesif-browser-js/"+z);f.onreadystatechange=function(){4===f.readyState&&(200<=f.status&&300>=f.status?e&&m.log("sent to moesif successfully: "+a.request.uri):(m.log("failed to sent to moesif: "+a.request.uri),e&&m.error(f.statusText),h&&b.e(h)&&h(Error("can not sent to moesif"),a)))};f.send(b.k(a))}function c(a,c,e,h){var f=new XMLHttpRequest;f.open("POST",M+B+I);f.setRequestHeader("Content-Type","application/json");
f.setRequestHeader("X-Moesif-Application-Id",c);f.setRequestHeader("X-Moesif-SDK","moesif-browser-js/"+z);f.onreadystatechange=function(){4===f.readyState&&(200<=f.status&&300>=f.status?e&&m.log("update user to moesif successfully: "+a.user_id):(m.log("update user to moesif failed "+a.user_id),e&&m.error(f.statusText),h&&b.e(h)&&h(Error("can not update user to moesif"),r,a)))};f.send(b.k(a))}m.log("moesif object creator is called");return{init:function(a){if(!a)throw Error("options are required by moesif-express middleware");
if(!a.applicationId)throw Error("A moesif application id is required. Please obtain it through your settings at www.moesif.com");if(a.getTags&&!b.e(a.getTags))throw Error("getTags should be a function");if(a.getApiVersion&&!b.e(a.getApiVersion))throw Error("identifyUser should be a function");if(a.maskContent&&!b.e(a.maskContent))throw Error("maskContent should be a function");if(a.skip&&!b.e(a.skip))throw Error("skip should be a function");var c={};c.P=a.getTags||function(){};c.I=a.maskContent||
function(a){return a};c.Y=a.skip||function(){return s};c.F=a.debug;c.D=a.callback;c.q=a.applicationId;c.A=a.apiVersion;this.c=c;this.o=localStorage.getItem("moesif_stored_user_id");this.h=localStorage.getItem("moesif_stored_session_id");m.log("moesif initiated");return this},start:function(){var b=this;if(this.l)return m.log("recording has already started, please call stop first."),s;m.log("moesif starting");this.l=N(function(c){m.log("determining if should log: "+c.request.uri);var e=Object.assign({},
c);b.o&&(e.user_id=b.o);b.h&&(e.session_token=b.h);e.tags=b.c.P(c)||"";if(b.c.A)e.request.api_version=b.c.A;b.c.I&&(e=b.c.I(e));!b.c.Y(c)&&!c.request.headers["X-Moesif-SDK"]?a(e,b.c.q,b.c.F,b.c.D):m.log("skipped logging for "+c.request.uri)});return!0},identifyUser:function(a,b){this.o=a;if(!this.c||!this.c.q)throw Error("Init needs to be called with a valid application Id before calling identify User.");b&&c({user_id:a,session_token:this.h,metadata:b},this.c.q,this.c.F,this.c.D);localStorage.setItem("moesif_stored_user_id",
a)},identifySession:function(a){this.h=a;localStorage.setItem("moesif_stored_session_id",a)},da:function(){return this.o},ca:function(){return this.h},stop:function(){if(this.l)this.l(),this.l=r}}}()})();
})();
